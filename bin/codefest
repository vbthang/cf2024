#!/usr/bin/env node

const yargs = require('yargs');

const codefest = require('../src/index');

const { argv } = yargs
  .usage('Usage: codefest -a <api server> -g <game id> -p <player id>')
  .env(true)
  .option('api-server', {
    alias: 'a',
    describe: 'API Server Url',
    type: 'string',
    default: 'http://localhost',
    // default: 'http://192.168.0.100:3000',
  })
  .option('game-id', {
    alias: 'g',
    describe: 'Game ID',
    type: 'string',
    default: 'b7df583f-619b-4a8a-bfe4-fb66225cd9d2',
  })
  .option('player-id', {
    alias: 'p',
    describe: 'Player ID',
    type: 'string',
    default: '354a46a1-96de-4bef-885e-bd928704ea44'
  })
  .option('mode', {
    alias: 'm',
    describe: 'Game mode',
    type: 'string',
    default: 'compat',
  })
  .demandOption(['game-id', 'player-id'])
  .help('help', 'Show this help and exit')
  .version(require('../package').version);

codefest({
  apiServer: argv.apiServer,
  playerId: argv.playerId,
  gameId: argv.gameId,
  mode: argv.mode,
});
